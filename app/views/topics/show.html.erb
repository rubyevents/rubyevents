<div class="container flex flex-col w-full gap-4 my-8">
  <% back_path = params[:back_to].presence || topics_path %>
  <% back_to_title = params[:back_to_title].presence || "Topics" %>
  <%= link_to sanitize(back_path), class: "hotwire-native:hidden" do %>
    <div class="flex items-center gap-2 title text-primary">
      <%= fa("arrow-left-long", class: "transition-arrow fill-primary", size: :xs) %>
      <div><%= back_to_title %></div>
    </div>
  <% end %>
  <div class="flex flex-col gap-4 hotwire-native:hidden">
    <div class="flex items-center gap-3 title text-primary">
      <h1><%= @topic.name %></h1>
      <% if @topic.gem_info.gem? %>
        <span class="badge badge-primary badge-outline gap-1">
          <%= fa("gem", size: :xs) %>
          Ruby Gem
        </span>
      <% end %>
    </div>

    <% if @topic.gem_info.gem? %>
      <%= render "topics/gem_info", topic: @topic %>
    <% end %>
  </div>
  <div
    id="topic-talks"
    class="
      grid min-w-full grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 gallery
    ">
    <%= render partial: "talks/card",
          collection: @talks,
          as: :talk,
          locals: {
            favoritable: true,
            user_favorite_talks_ids: @user_favorite_talks_ids,
            user_watched_talks: user_watched_talks,
            back_to: back_to_from_request,
            back_to_title: @topic.name
          } %>
  </div>
  <%= render "topics/talks_cursor", pagy: @pagy, topic: @topic %>
</div>

<% if countries_with_events.any? %>
  <div role="tablist" class="tabs tabs-boxed bg-base-100 mt-2">
    <input type="radio" name="map_view" role="tab" class="tab px-6 !rounded-lg" aria-label="Map" checked>
    <div role="tabpanel" class="tab-content mt-6">
      <div
        id="profile-map"
        class="w-full h-[600px] md:h-[800px] rounded-lg"
        data-controller="map"
        data-map-markers-value="<%= event_map_markers.to_json %>"></div>
    </div>

    <input type="radio" name="map_view" role="tab" class="tab px-6 !rounded-lg" aria-label="List">
    <div role="tabpanel" class="tab-content mt-6">
      <div class="space-y-8">
        <% countries_with_events.group_by { |country, _| country.continent }.sort_by(&:first).each do |continent, countries_group| %>
          <div>
            <h3 class="text-lg font-semibold mb-4"><%= continent %></h3>
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <% countries_group.each do |country, events| %>
                <%= render "shared/country_card", country: country, events: events %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<div class="flex-1 flex flex-col items-center justify-center">
  <div class="w-20 h-20 mx-auto rounded-full border-3 border-white overflow-hidden bg-white/20 mb-3">
    <% if user.custom_avatar? %>
      <%= image_tag user.avatar_url(size: 80), class: "w-full h-full object-cover", alt: user.name %>
    <% else %>
      <div class="w-full h-full flex items-center justify-center text-2xl font-bold">
        <%= user.name.first.upcase %>
      </div>
    <% end %>
  </div>

  <p class="font-bold text-lg mb-1"><%= user.name %></p>
  <p class="text-red-200 text-sm mb-6">RubyEvents.org <%= year %> Wrapped</p>

  <% if top_speakers.any? %>
    <div class="flex justify-center -space-x-2 mb-1">
      <% top_speakers.first(5).each do |speaker, _| %>
        <div class="w-8 h-8 rounded-full border-2 border-red-600 overflow-hidden bg-white/20">
          <%= image_tag speaker.avatar_url(size: 40), class: "w-full h-full object-cover", alt: speaker.name %>
        </div>
      <% end %>
    </div>
    <p class="text-[10px] text-red-200 mb-6">Favorite Speakers</p>
  <% end %>

  <div class="grid grid-cols-2 gap-2 w-full max-w-xs mb-2">
    <div class="text-center p-2 bg-white/10 rounded-lg">
      <p class="text-xl font-bold"><%= total_talks_watched %></p>
      <p class="text-[10px] text-red-200">Talks Watched</p>
    </div>
    <div class="text-center p-2 bg-white/10 rounded-lg">
      <p class="text-xl font-bold"><%= total_watch_time_hours %>h</p>
      <p class="text-[10px] text-red-200">Watch Time</p>
    </div>
  </div>

  <div class="grid grid-cols-2 gap-2 w-full max-w-xs mb-2">
    <div class="text-center p-2 bg-white/10 rounded-lg">
      <p class="text-xl font-bold"><%= events_attended_in_year.count %></p>
      <p class="text-[10px] text-red-200">Events Attended</p>
    </div>
    <div class="text-center p-2 bg-white/10 rounded-lg">
      <p class="text-xl font-bold"><%= countries_visited.count %></p>
      <p class="text-[10px] text-red-200">Countries Visited</p>
    </div>
  </div>

  <% if talks_given_in_year.any? %>
    <div class="grid grid-cols-2 gap-2 w-full max-w-xs mb-6">
      <div class="text-center p-2 bg-white/20 rounded-lg">
        <p class="text-xl font-bold"><%= talks_given_in_year.count %></p>
        <p class="text-[10px] text-red-200">Talks Given</p>
      </div>
      <div class="text-center p-2 bg-white/20 rounded-lg">
        <p class="text-xl font-bold"><%= number_to_human(total_views_on_talks, units: {thousand: "K", million: "M"}, format: "%n%u") %></p>
        <p class="text-[10px] text-red-200">Views on YouTube</p>
      </div>
    </div>
  <% end %>

  <% if involvements_in_year.any? %>
    <div class="grid grid-cols-1 gap-2 w-full max-w-xs mb-6">
      <div class="text-center p-2 bg-purple-500/30 rounded-lg">
        <p class="text-xl font-bold"><%= involvements_in_year.count %></p>
        <p class="text-[10px] text-red-200">Events Helped Organize</p>
      </div>
    </div>
  <% end %>

  <% if personality.present? %>
    <div class="personality-badge text-sm px-4 py-2 mb-6">
      <%= personality %>
    </div>
  <% end %>

  <% if top_topics.any? %>
    <div class="flex flex-wrap justify-center gap-1 max-w-xs">
      <% top_topics.first(3).each do |topic, _| %>
        <span class="px-2 py-1 bg-white/10 rounded text-xs"><%= topic.name %></span>
      <% end %>
    </div>
  <% end %>
</div>

<div class="mt-auto pt-4 flex flex-col items-center">
  <%= image_tag "logo.png", class: "w-8 h-8 mb-1", alt: "RubyEvents.org" %>
  <p class="text-xs text-red-200 font-bold">RubyEvents.org/Wrapped</p>
</div>

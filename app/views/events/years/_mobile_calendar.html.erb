<% current_month = (year == Date.today.year) ? Date.today.month : nil %>

<div class="md:hidden flex flex-col divide-y divide-gray-100 bg-white rounded-xl shadow-sm border border-gray-100">
  <% (1..12).each do |month| %>
    <% month_events = events_by_month[month] || [] %>
    <% is_current_month = month == current_month %>
    <div class="flex gap-4 p-3 <%= "bg-red-50" if is_current_month %>">
      <div class="w-8 shrink-0 pt-1">
        <span class="text-sm font-bold <%= is_current_month ? "text-red-600" : "text-gray-900" %>"><%= Date::ABBR_MONTHNAMES[month] %></span>
      </div>

      <div class="flex-1 flex flex-wrap gap-2">
        <% if month_events.any? %>
          <% month_events.each do |event| %>
            <%= link_to event_path(event) do %>
              <div class="w-10 h-10 rounded-lg overflow-hidden ring-2 ring-gray-100 shadow-sm">
                <%= image_tag event.avatar_image_path, alt: event.name, class: "w-full h-full object-cover", loading: "lazy" %>
              </div>
            <% end %>
          <% end %>
        <% else %>
          <span class="text-gray-300 text-sm">â€”</span>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<div class="container py-8">
  <div class="flex items-center justify-between w-full hotwire-native:hidden">
    <h1 class="title">
      <%= title "Countries" %>
    </h1>
  </div>

  <p class="mt-3 md:mt-6 mb-6 text-[#636B74] max-w-[700px]">
    Explore Ruby events and Rubyists from around the world by country.
  </p>

  <div class="mt-6">
    <% @countries_by_continent.each do |continent, countries| %>
      <% if countries.any? %>
        <h2 class="mt-3"><%= continent %></h2>

        <div id="events-<%= continent %>" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 lg:gap-x-12 gap-y-2 min-w-full pt-4 pb-8">
          <% countries.sort_by(&:iso_short_name).each do |country| %>
            <% events = @events_by_country[country] %>
            <% users_count = @users_by_country[country] || 0 %>
            <% next if events.nil? %>

            <%= link_to country_path(country.translations["en"].parameterize), id: "country-#{country.alpha2}", class: "event flex justify-between items-center" do %>
              <div class="flex items-center gap-2">
                <span class="event-name"><%= country.emoji_flag %> <%= country.translations["en"] %></span>
              </div>
              <div class="flex gap-2">
                <% if users_count > 0 %>
                  <%= ui_badge("#{users_count} #{"Rubyist".pluralize(users_count)}", kind: :primary, outline: true, size: :lg) %>
                <% end %>
                <%= ui_badge(events.count, kind: :secondary, outline: true, size: :lg, class: "min-w-10") %>
              </div>
            <% end %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<%# locals: (title:, events:, view_all_path: nil, view_all_count: nil, empty_message: nil, fallback_text: nil, fallback_path: nil, limit: 5, dimmed: false) %>

<div class="mb-12 <%= "opacity-60 hover:opacity-100 transition-opacity" if dimmed %>">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-bold text-gray-900"><%= title %></h2>

    <% if view_all_path.present? && view_all_count.present? && view_all_count > limit %>
      <%= link_to "View all #{view_all_count}", view_all_path, class: "link text-sm" %>
    <% end %>
  </div>

  <% if events.any? %>
    <%= render "shared/date_grouped_events", events: events.first(limit), empty_message: empty_message || "No events found." %>
  <% else %>
    <div class="text-gray-500 py-8 text-center bg-gray-50 rounded-xl">
      <p class="mb-2"><%= empty_message || "No events yet." %></p>

      <% if fallback_path.present? && fallback_text.present? %>
        <%= link_to fallback_text, fallback_path, class: "link text-sm" %>
      <% end %>
    </div>
  <% end %>
</div>

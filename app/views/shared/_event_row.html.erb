<%# locals: (event:) %>

<%= link_to event_path(event),
      class: "block bg-white rounded-lg border p-3 sm:p-4 hover:border-gray-400 transition-colors",
      data: {events_filter_target: "event", kind: event.kind} do %>
  <div class="flex gap-3 sm:gap-4 items-start">
    <% if event.avatar_image_path %>
      <div class="w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0 rounded-lg overflow-hidden">
        <%= image_tag event.avatar_image_path, class: "w-full h-full object-cover" %>
      </div>
    <% end %>

    <div class="flex-grow min-w-0">
      <div class="font-semibold text-gray-900 truncate"><%= event.name %></div>

      <% if event&.venue&.exist? %>
        <div class="text-sm text-gray-600 mt-1 flex items-center gap-1 min-w-0">
          <%= fa("city", size: :xs, class: "text-gray-400 flex-shrink-0") %>
          <span class="truncate"><%= event.venue.name %></span>
        </div>
      <% end %>

      <% if event.location.present? %>
        <div class="text-sm text-gray-600 mt-1 flex items-center gap-1 min-w-0">
          <%= fa("map-marker-alt", size: :xs, class: "text-gray-400 flex-shrink-0") %>
          <span class="truncate"><%= event.location %></span>
        </div>
      <% end %>

      <div class="text-sm text-gray-600 mt-1 flex items-center gap-1">
        <%= fa("calendar", size: :xs, class: "text-gray-400 flex-shrink-0") %>
        <span><%= event.formatted_dates %></span>
      </div>
    </div>

    <% if event.participants.any? %>
      <div class="flex-shrink-0 hidden sm:block">
        <%= render Ui::AvatarGroupComponent.new(event.participants.to_a, max: 4, size: :md, overlap: "-space-x-3") %>
      </div>
    <% end %>
  </div>
<% end %>

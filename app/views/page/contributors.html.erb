<div class="container py-8">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-4xl font-bold">Contributors</h1>

    <div class="flex gap-2">
      <button onclick="document.getElementById('detailed-view').classList.remove('hidden'); document.getElementById('compact-view').classList.add('hidden'); this.classList.add('btn-primary'); this.classList.remove('btn-outline'); this.nextElementSibling.classList.remove('btn-primary'); this.nextElementSibling.classList.add('btn-outline');"
              class="btn btn-sm btn-primary">
        Detailed
      </button>
      <button onclick="document.getElementById('compact-view').classList.remove('hidden'); document.getElementById('detailed-view').classList.add('hidden'); this.classList.add('btn-primary'); this.classList.remove('btn-outline'); this.previousElementSibling.classList.remove('btn-primary'); this.previousElementSibling.classList.add('btn-outline');"
              class="btn btn-sm btn-outline">
        Compact
      </button>
    </div>
  </div>

  <article class="prose mb-8">
    <p>
      Thank you to all <%= pluralize(@contributors.count, "contributor") %> who have helped make RubyEvents.org possible!
      Every contribution, big or small, helps improve the Ruby community's access to quality educational content.
    </p>
  </article>

  <% if @contributors.any? %>
    <div id="detailed-view" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
      <% @contributors.each do |contributor| %>
        <%= link_to contributor.user ? profile_path(contributor.user) : contributor.html_url,
              target: contributor.user ? nil : "_blank",
              rel: contributor.user ? nil : "noopener noreferrer",
              class: "group flex flex-col items-center justify-center p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors h-full" do %>
          <div class="mb-3">
            <%= image_tag contributor.avatar_url,
                  alt: contributor.login,
                  class: "w-20 h-20 rounded-full" %>
          </div>

          <div class="text-center w-full">
            <% if contributor.name.present? %>
              <div class="font-semibold text-sm break-words mb-1 flex items-center justify-center gap-1">
                <span><%= contributor.name %></span>
                <% if contributor.user %>
                  <%= fa("circle-user", class: "fill-gray-500", size: :xs, title: "Has a RubyVideo profile") %>
                <% end %>
              </div>
              <div class="text-xs text-gray-500">
                @<%= contributor.login %>
              </div>
            <% else %>
              <div class="font-semibold text-sm break-words flex items-center justify-center gap-1">
                <span>@<%= contributor.login %></span>
                <% if contributor.user %>
                  <%= fa("circle-user", class: "fill-gray-500", size: :xs, title: "Has a RubyVideo profile") %>
                <% end %>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>

    <!-- Compact View (for social media screenshots) -->
    <div id="compact-view" class="hidden">
      <div class="bg-white border-4 border-red-600 p-8 rounded-xl">
        <h2 class="text-3xl font-bold text-gray-900 text-center mb-6">
          <%= @contributors.count %> Contributors
        </h2>

        <div class="grid grid-cols-10 sm:grid-cols-12 md:grid-cols-16 lg:grid-cols-20 gap-3 mb-6">
          <% @contributors.each do |contributor| %>
            <%= link_to contributor.user ? profile_path(contributor.user) : contributor.html_url,
                  target: contributor.user ? nil : "_blank",
                  rel: contributor.user ? nil : "noopener noreferrer",
                  title: "#{contributor.name.present? ? contributor.name : "@#{contributor.login}"} (@#{contributor.login})#{" - Has a RubyVideo profile" if contributor.user}",
                  class: "group aspect-square" do %>
              <div class="w-full h-full rounded-full overflow-hidden border-2 border-gray-200 hover:scale-110 transition-transform">
                <%= image_tag contributor.avatar_url,
                      alt: contributor.login,
                      class: "w-full h-full object-cover" %>
              </div>
            <% end %>
          <% end %>
        </div>

        <p class="text-gray-700 text-center text-lg">
          Thank you for making RubyEvents.org possible!
        </p>
      </div>
    </div>
  <% else %>
    <div class="alert alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
      <span>Unable to load contributors at this time. Please try again later.</span>
    </div>
  <% end %>
</div>

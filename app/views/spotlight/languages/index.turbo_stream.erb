<%= turbo_stream.replace "languages_search_results" do %>
  <div
    id="languages_search_results"
    class="<%= @languages.any? ? 'pb-4 border-b' : 'hidden' %>"
    data-spotlight-search-target="languagesSearchResults">
    <% if @languages.any? %>
      <div class="flex items-center flex-wrap gap-2 py-2">
        <span class="text-sm font-medium text-gray-600">Languages</span>
        <span class="text-xs text-gray-400">(<%= total_count %>)</span>
      </div>
      <div class="flex flex-col gap-1">
        <% @languages.each do |language| %>
          <%= link_to talks_path(language: language[:code]), target: "_top", class: "flex items-center justify-between gap-4 py-2 px-2 rounded hover:bg-gray-100 group" do %>
            <div class="flex items-center gap-3">
              <span class="text-lg"><%= language_to_emoji(language[:name]) %></span>
              <span class="font-medium"><%= language[:name] %></span>
            </div>
            <div class="flex items-center gap-4 text-sm text-gray-500">
              <span class="text-xs">(<%= language[:talk_count] %> talks)</span>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>

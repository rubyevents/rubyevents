<div class="space-y-4" data-controller="watched-talk-modal" data-watched-talk-modal-talk-id-value="<%= dom_id(@talk, :player_container) %>">
  <h3 class="text-lg font-semibold">Mark as Watched</h3>
  <p class="text-sm text-gray-600">Where did you watch this talk?</p>

  <div class="grid grid-cols-2 sm:grid-cols-5 gap-2 auto-rows-fr">
    <% WatchedTalk.watched_on_options_for(@talk).each do |key, option| %>
      <% watched_at = (key == "in_person" && @talk.date) ? @talk.date.to_date : nil %>

      <%= button_to talk_watched_talk_path(@talk), method: :post, class: "contents", params: {watched_talk: {watched_on: key, watched_at: watched_at}.compact}, data: {watched_talk_modal_target: "form"} do %>
        <div class="flex flex-col items-center justify-center p-3 border-2 rounded-lg cursor-pointer transition-colors h-full hover:bg-gray-50 hover:border-gray-300">
          <%= fa(option[:icon], size: :lg, class: "mb-1") %>
          <span class="text-xs text-center leading-tight"><%= option[:label] %></span>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="flex justify-end pt-2">
    <%= button_to talk_watched_talk_path(@talk), method: :post, class: "btn btn-sm btn-ghost", data: {watched_talk_modal_target: "form"} do %>
      Skip
    <% end %>
  </div>
</div>
